#!/bin/bash

DIR_HOME=/home/openwrt
DIR_ROOT=$DIR_HOME/14.07

# getting source
git clone git://git.openwrt.org/14.07/openwrt.git $DIR_ROOT
git clone https://github.com/aa65535/openwrt-chinadns.git $DIR_ROOT/package/chinadns-c
git clone https://github.com/aa65535/openwrt-shadowsocks.git $DIR_ROOT/package/shadowsocks-libev
git clone https://github.com/aa65535/openwrt-shadowvpn.git $DIR_ROOT/package/shadowvpn
ln -s $DIR_HOME/dl $DIR_ROOT/dl

# scripts - mn
touch $DIR_ROOT/mn && chmod +x $DIR_ROOT/mn
echo "#!/bin/bash" >> $DIR_ROOT/mn
echo "DIR_HOME=/home/openwrt" >> $DIR_ROOT/mn
echo "DIR_ROOT=$DIR_HOME/14.07" >> $DIR_ROOT/mn
echo "DIR_PKG=$DIR_ROOT/package" >> $DIR_ROOT/mn
echo "cd $DIR_PKG/chinadns-c && git pull" >> $DIR_ROOT/mn
echo "cd $DIR_PKG/shadowsocks-libev && git pull" >> $DIR_ROOT/mn
echo "cd $DIR_PKG/shadowvpn && git pull" >> $DIR_ROOT/mn
echo "cd $DIR_ROOT && git pull" >> $DIR_ROOT/mn
echo "$DIR_ROOT/scripts/feeds update -a && $DIR_ROOT/scripts/feeds install -a" >> $DIR_ROOT/mn
echo "make defconfig" >> $DIR_ROOT/mn
echo "make prereq" >> $DIR_ROOT/mn
echo "make menuconfig" >> $DIR_ROOT/mn